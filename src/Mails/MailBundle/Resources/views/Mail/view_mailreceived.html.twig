{% extends "MailsMailBundle::layout.html.twig" %}

{% block title %}{{ mail.objet }}{% endblock %}

{% block body %}
<p>
    <h2>{{ mail.objet }}</h2>

<div class="table-responsive">
            <table cellspacing=4 cellpadding=4 width=60%  class="table-view">
                <thead align="center" valign="middle" bgcolor="#A9A9A9">
                    <tr> 
                        <th colspan="2">Informations concernant le courrier reçu</th>
                    </tr>
                </thead>
                
                <tr align="right" valign="middle" bgcolor="#C0C0C0">
                    <td colspan="2">
                     {% if app.user and is_granted('ROLE_ADMIN') %}
                         {% if mail.registred == true %}
                     <a href="{{ path('mails_mailreceived_validation', {'id': mail.id}) }}">
                        <u>Valider le courrier</u>
                      </a>
                      &nbsp;<b>|</b>&nbsp;
                          {% endif %}
                        <a href="{{ path('mails_mailreceived_add') }}"><u>Ajouter</u></a> 
                        &nbsp;<b>|</b>&nbsp;
                        <a href="{{ path('mails_mailreceived_edit', {'id': mail.id}) }}">
                          <u>
                          Modifier
                          </u>
                        </a> 
                        &nbsp;<b>|</b>&nbsp;
                        <a href="{{ path('mails_mailreceived_delete', { 'id': mail.id }) }}">
                        <u>
                        Supprimer
                        </u>
                      </a>
                      &nbsp;<b>|</b>&nbsp;
                    {% endif %}
                    {% if app.user and is_granted('ROLE_SECRETAIRE') %}
                      <a href="{{ path('mails_mailreceived_registration', {'id': mail.id}) }}">
                        <u>Enregistrer le courrier</u>
                      </a>
                      &nbsp;<b>|</b>&nbsp;
                    {% endif %}
                      <a href="{{ path('mails_mail_mailreceived') }}">
                        <u>
                        Retour
                        </u>
                      </a>
                      &nbsp;<b>|</b>&nbsp;
                      <a href="{{ path('mails_core_home') }}">
                        <u>
                        Accueil
                        </u>
                      </a>
                      &nbsp;&nbsp;
                    </td>
                </tr>
                <tr>
                    <td align="right" bgcolor="#DEDEDE" width=40%><font color="gray">Référence</font>&nbsp;&nbsp;</td>
                    <td align="left" bgcolor="#EBEBEB" width=60%>&nbsp;&nbsp;{{ mail.reference }}</td>
                </tr>
                <tr>
                    <td align="right" bgcolor="#DEDEDE" width=40%><font color="gray">Objet</font>&nbsp;&nbsp;</td>
                    <td align="left" bgcolor="#EBEBEB" width=60%>&nbsp;&nbsp;{{ mail.objet }}</td>
                </tr>
                <tr>
                    <td align="right" bgcolor="#DEDEDE" width=40%><font color="gray">Date d'enregistrement</font>&nbsp;&nbsp;</td>
                    <td align="left" bgcolor="#EBEBEB" width=60%>
                    {% if mail.dateEdition is not null %}    
                        &nbsp;&nbsp;{{ mail.dateEdition|date('d/m/Y à H:i:s') }}
                    {% endif %}    
                    </td>
                </tr>
                <tr>
                    <td align="right" bgcolor="#DEDEDE" width=40%><font color="gray">Date de reception</font>&nbsp;&nbsp;</td>
                    <td align="left" bgcolor="#EBEBEB" width=60%>
                    {% if mail.mailreceived.dateReception is not null %}
                        &nbsp;&nbsp;{{ mail.mailreceived.dateReception|date('d/m/Y à H:i:s') }}
                    {% endif %}
                    </td>
                </tr>
                <tr>
                    <td align="right" bgcolor="#DEDEDE" width=40%><font color="gray">Nombre de pièces jointes</font>&nbsp;&nbsp;</td>
                    <td align="left" bgcolor="#EBEBEB" width=60%>&nbsp;&nbsp;{{ mail.nombrePiecesJointes }}</td>
                </tr>
                 <tr>
                    <td align="right" bgcolor="#DEDEDE" width=40%><font color="gray">Accusé de reception</font>&nbsp;&nbsp;</td>
                    <td align="left" bgcolor="#EBEBEB" width=60%>&nbsp;&nbsp;{% if mail.received == true %}OUI{% else %}NON{% endif %}</td>
                </tr>
                <tr>
                    <td align="right" bgcolor="#DEDEDE" width=40%><font color="gray">Traitement</font>&nbsp;&nbsp;</td>
                    <td align="left" bgcolor="#EBEBEB" width=60%>&nbsp;&nbsp;{% if mail.treated == true %}OUI{% else %}NON{% endif %}</td>
                </tr>
                <tr>
                    <td align="right" bgcolor="#DEDEDE" width=40%><font color="gray">Expéditeur</font>&nbsp;&nbsp;</td>
                    <td align="left" bgcolor="#EBEBEB" width=60%>
                      {% if app.user and is_granted('ROLE_ADMIN') %}
                      &nbsp;&nbsp;
                       <a href="{{ path('mails_contact_all_mail', {'id': mail.mailreceived.actor.id}) }}"><u>{{ mail.mailreceived.actor.name }}</u></a>
                      {% else %}
                      &nbsp;&nbsp;
                      {{ mail.mailreceived.actor.name }}
                      {% endif %}
                    </td>
                </tr>
                <tr>
                    <td align="right" bgcolor="#DEDEDE" width=40%><font color="gray">Destinataire</font>&nbsp;&nbsp;</td>
                    <td align="left" bgcolor="#EBEBEB" width=60%>
                      {% if app.user and is_granted('ROLE_ADMIN') %}
                      &nbsp;&nbsp;
                       <a href="{{ path('mails_user_all_mails', {'id': mail.mailreceived.user.id}) }}"><u>{{ mail.mailreceived.user.username }}</u></a>
                      {% else %}
                      &nbsp;&nbsp;
                      {{ mail.mailreceived.user.username }}
                      {% endif %}
                    </td>
                </tr>
   
            </table>
        </div> 

{% endblock %}
